============================= test session starts ==============================
platform darwin -- Python 3.11.6, pytest-8.4.1, pluggy-1.6.0
rootdir: /tmp/hermes_worktree_canonical
configfile: pyproject.toml
plugins: asyncio-1.1.0, anyio-4.9.0
collected 20 items

tests/mcp/test_server_unit.py::TestAnchorEntry::test_is_expired PASSED
tests/mcp/test_server_unit.py::TestAnchorEntry::test_entry_size PASSED
tests/mcp/test_server_unit.py::TestAnchorEntry::test_sha256_hash PASSED
tests/mcp/test_server_unit.py::TestMCPServerCore::test_put_and_resolve PASSED
tests/mcp/test_server_unit.py::TestMCPServerCore::test_stat_operation PASSED
tests/mcp/test_server_unit.py::TestMCPServerCore::test_overwrite_ref PASSED
tests/mcp/test_server_unit.py::TestMCPServerCore::test_size_limits PASSED
tests/mcp/test_server_unit.py::TestMCPServerCore::test_invalid_ref_format PASSED
tests/mcp/test_server_unit.py::TestMCPServerTTL::test_ttl_expiry PASSED
tests/mcp/test_server_unit.py::TestMCPServerTTL::test_ttl_inference PASSED
tests/mcp/test_server_unit.py::TestMCPServerTTL::test_permanent_entries PASSED
tests/mcp/test_server_unit.py::TestMCPServerTTL::test_cleanup_expired PASSED
tests/mcp/test_server_unit.py::TestMCPServerNamespaces::test_namespace_isolation PASSED
tests/mcp/test_server_unit.py::TestMCPServerNamespaces::test_namespace_cleanup PASSED
tests/mcp/test_server_unit.py::TestMCPServerNamespaces::test_default_namespace PASSED
tests/mcp/test_server_unit.py::TestMCPServerLimits::test_size_rejection PASSED
tests/mcp/test_server_unit.py::TestMCPServerLimits::test_large_payload PASSED
tests/mcp/test_server_unit.py::TestMCPServerLimits::test_many_small_entries PASSED
tests/mcp/test_server_unit.py::TestContentAddressedStorage::test_deduplication PASSED
tests/mcp/test_server_unit.py::TestContentAddressedStorage::test_atomic_writes PASSED [100%]

============================== 20 passed in 0.47s ==============================

============================= test session starts ==============================
platform darwin -- Python 3.11.6, pytest-8.4.1, pluggy-1.6.0
rootdir: /tmp/hermes_worktree_canonical
configfile: pyproject.toml
plugins: asyncio-1.1.0, anyio-4.9.0
collected 9 items

tests/integration/test_mcp_ttls.py::TestMCPTTLIntegration::test_log_ttl_24h PASSED
tests/integration/test_mcp_ttls.py::TestMCPTTLIntegration::test_diff_ttl_7d PASSED
tests/integration/test_mcp_ttls.py::TestMCPTTLIntegration::test_mixed_ttl_expiry PASSED
tests/integration/test_mcp_ttls.py::TestMCPTTLIntegration::test_background_cleanup PASSED
tests/integration/test_mcp_ttls.py::TestMCPTTLIntegration::test_persistence_across_restarts PASSED
tests/integration/test_mcp_ttls.py::TestMCPTTLIntegration::test_speculative_namespace_rollback PASSED
tests/integration/test_mcp_ttls.py::TestMCPTTLIntegration::test_concurrent_access PASSED
tests/integration/test_mcp_ttls.py::TestMCPTTLIntegration::test_ttl_update_on_overwrite PASSED
tests/integration/test_mcp_ttls.py::TestMCPTTLIntegration::test_expired_entry_cleanup PASSED [100%]

============================== 9 passed in 6.33s ===============================
Cleaned up worktree
